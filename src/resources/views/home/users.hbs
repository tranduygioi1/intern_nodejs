<div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-4 gap-3">
  <h2 class="mb-0 flex-shrink-0">Danh Sách User</h2>

  <form action="/home/users" method="GET" class="d-flex flex-grow-0" style="min-width: 400px;">
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Tìm theo tên, username, email..." value="{{q}}">
      <button class="btn btn-primary" type="submit">
        <i class="bx bx-search"></i> Tìm kiếm
      </button>
    </div>
  </form>
</div>



<div class="card shadow-sm">
  <div class="card-header bg-dark text-white">
    <i class="bx bx-list-ul"></i> Danh sách User
  </div>
  <div class="card-body p-0">
    <table class="table table-striped table-bordered mb-0">
      <thead class="table-dark">
        <tr>
          <th style="background:#009BDF;color:#fff;">#</th>
          <th style="background:#009BDF;color:#fff;">Tên</th>
          <th style="background:#009BDF;color:#fff;">Username</th>
          <th style="background:#009BDF;color:#fff;">Phòng ban</th>
          <th style="background:#009BDF;color:#fff;">Email</th>
          <th style="background:#009BDF;color:#fff;">Vai trò</th>
          <th style="background:#009BDF;color:#fff;" class="text-center">Hành động</th>
        </tr>
      </thead>
      <tbody>
        {{#each users}}
        <tr>
            <td>{{sum @index 1}}</td>
            <td>{{this.name}}</td>
            <td>{{this.username}}</td>
            <td>{{this.department}}</td>
            <td>{{this.email}}</td>
          <td>
            {{#if this.role}}
              <span>{{this.role.role_name}}</span>
            {{else}}
              <span class="text-muted">Chưa có vai trò</span>
            {{/if}}
          </td>


            <td class="text-center">
                <a href="/roles/assign-role/{{this._id}}" class="btn btn-primary btn-sm">
                    <i class="bx bx-link-alt"></i> Gán Vai Trò
                </a>
            </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</div>